(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(35)},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(7),c=a(1),s=(a(30),a(31),a(14)),o=a(15),l=a(19),d=a(16),m=a(20),u=a(18),v=a(5),p=a(3),f="RESERVE_SERVICE",y="CANCEL_SERVICE",E="UPDATE_CALENDAR",S="SERVICES_DATA_LOADED",h="FILTER_SERVICE_LIST",g="TOGGLE_APP_FORM",b="TOGGLE_MODAL",C="SEND_SELECTED_DATE_TIME";function T(e){return{type:g,payload:e}}function O(e){return{type:b,payload:e}}function L(e){return{type:E,payload:e}}var N=function(e){var t=e.items,a=e.onClick;return r.a.createElement("div",{className:"services-block"},t.map(function(e,t){return r.a.createElement("div",{className:"service-item ".concat(e.type.replace(" ","")),key:t,onClick:function(){return a(e)}},r.a.createElement("div",{className:"type"},e.type),r.a.createElement("div",{className:"price"},r.a.createElement("div",null,e.price," \u20bd")),r.a.createElement("div",{className:"company"},e.company.name))}))},j=function(e){var t=e.items,a=e.name,n=e.onChange,i=e.header,c=e.disabled,s=e.children;return r.a.createElement("select",{id:a,onChange:n,disabled:c},r.a.createElement("option",{value:""},i),t.map(function(e,t){return r.a.createElement("option",{key:t},e)}),s)},D=Object(c.b)(function(e){return{servicesList:e.servicesList,filterConditions:e.filterConditions,filteredServicesList:e.filteredServicesList}},{toFilterServiceList:function(e){return{type:h,payload:e}},toggleAppForm:T})(function(e){var t=function(t){var a=t.target,n=a.value,r=a.id;e.toFilterServiceList(Object(p.a)({},e.filterConditions,Object(v.a)({},r,n)))},a=Object(u.a)(new Set(e.servicesList.map(function(e){return e.type})));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"inputs"},r.a.createElement(j,{name:"sortByType",onChange:t,header:"Sort by type",items:a}),r.a.createElement("input",{type:"text",id:"sortByName",onChange:t,placeholder:"search by company"})),r.a.createElement(N,{items:e.filteredServicesList,onClick:function(t){var a={serviceId:t.id,company:t.company.name,serviceType:t.type};e.toggleAppForm(a)}}))}),k=function(e,t){return e.map(function(e){return e.id===t.serviceId?{id:e.id,dates:(a=e.dates,a.map(function(e){return e.date===t.date?{date:e.date,times:(a=e.times,a.map(function(e){return e.value===t.time?{isBlocked:!e.isBlocked,value:e.value}:e}))}:e;var a}))}:e;var a})},w=function(e){var t=e.items,a=e.onClick;return r.a.createElement("div",{className:"reserved-services-list"},r.a.createElement("div",{id:"reserved-list-header"},"My reservations"),t.map(function(e){return r.a.createElement("div",{className:"reserved-item",id:e.id,key:e.id},r.a.createElement("div",{className:"date"},r.a.createElement("div",null,e.time),r.a.createElement("div",null,e.date.replace(/-/gi,"."))),r.a.createElement("div",{className:"type"},e.serviceType),r.a.createElement("div",{className:"company"},e.company),r.a.createElement("div",{className:"cancel",onClick:function(){return a(e)}},"cancel"))}))};a(32);var F=Object(c.b)(function(e){return{reservedServices:e.reservedServices,calendar:e.calendar}},function(e){return{cancelService:function(t){return e((a=t,console.log("id",a),{type:y,payload:a}));var a},updateCalendar:function(t){return e(L(t))}}})(function(e){var t=e.reservedServices.sort(function(e,t){return new Date("".concat(e.date," ").concat(e.time))-new Date("".concat(t.date," ").concat(t.time))});return r.a.createElement(w,{items:t,onClick:function(t){e.cancelService(t.id),e.updateCalendar(k(e.calendar,t))}})}),R=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(F,null),r.a.createElement(D,null))},_=(a(33),Object(c.b)(function(e){return{reservedServices:e.reservedServices}},{toggleModal:O,toggleAppForm:T})(function(e){var t=e.reservedServices.filter(function(e,t,a){return e.id===a.length-1})[0];return r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-header"},"You have successfully ordered the next service:"),r.a.createElement("div",{className:"info"},r.a.createElement("div",null,t.serviceType.toUpperCase()," in ",t.company),r.a.createElement("div",null,"on ",r.a.createElement("span",null,t.date.replace(/-/gi,"."))," at ",r.a.createElement("span",null,t.time))),r.a.createElement("button",{onClick:function(){e.toggleAppForm(),e.toggleModal()}},"close")))})),A=function(e){var t=e.cancelClick,a=e.reserveClick,n=e.displayStyle,i=e.handleSelect,c=e.dates,s=e.times,o=e.disabledTimeSelect;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"reservation-form",style:n?{display:"none"}:null},r.a.createElement("div",{className:"form-container"},r.a.createElement("div",{className:"form-header"},"Please, choose time to reserve "),r.a.createElement("div",{className:"selects-container"},r.a.createElement(j,{name:"date",onChange:i,header:"choose date",items:[]},c),r.a.createElement(j,{name:"time",onChange:i,header:"choose time",items:[],disabled:o},s)),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{id:"cancel",onClick:t},"Cancel"),r.a.createElement("button",{id:"reserve",onClick:a},"Reserve")))))};a(34);var M=Object(c.b)(function(e){return{reservedServices:e.reservedServices,calendar:e.calendar,dataToResForm:e.dataToResForm,selectedDateTime:e.selectedDateTime,servicesList:e.servicesList,isModalShown:e.isModalShown}},function(e){return{toggleAppForm:function(){return e(T())},sendDateTime:function(t){return e({type:C,payload:t})},reserveService:function(t){return e({type:f,payload:t})},updateCalendar:function(t){return e(L(t))},toggleModal:function(){return e(O())}}})(function(e){var t,a=e.dataToResForm,n=a.serviceId,i=a.company,c=a.serviceType,s=e.selectedDateTime,o=s.date,l=s.time,d=e.reservedServices.length,m=e.calendar.filter(function(e){return e.id===n})[0].dates,u=m.map(function(e,t){return r.a.createElement("option",{key:t},e.date)}),f=m.filter(function(e){return e.date===o})[0];return e.selectedDateTime.date&&(t=f.times.filter(function(e){return!e.isBlocked}).map(function(e,t){return r.a.createElement("option",{key:t},e.value)})),r.a.createElement(r.a.Fragment,null,e.isModalShown&&r.a.createElement(_,null),r.a.createElement(A,{cancelClick:e.toggleAppForm,reserveClick:function(){var t={date:o,time:l,serviceId:n,serviceType:c,company:i,id:d};o&&l&&(e.reserveService(t),e.updateCalendar(k(e.calendar,t)),e.toggleModal())},displayStyle:e.isModalShown,handleSelect:function(t){var a=t.target,n=a.value,r=a.id;e.sendDateTime(Object(p.a)({},e.selectedDateTime,Object(v.a)({},r,n)))},dates:u,times:t,disabledTimeSelect:!e.selectedDateTime.date}))}),I=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.getCalendarData(),this.props.getServiceListData()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.props.resFormShown?r.a.createElement(M,null):r.a.createElement(R,null))}}]),t}(r.a.Component),B=Object(c.b)(function(e){return{resFormShown:e.isReservationFormShown}},{getCalendarData:function(){return function(e){return fetch("https://raw.githubusercontent.com/srgmkv/services-reservation/master/public/dates.json").then(function(e){return e.json()}).then(function(t){e({type:E,payload:t})})}},getServiceListData:function(){return function(e){return fetch("https://raw.githubusercontent.com/srgmkv/services-reservation/master/public/services.json").then(function(e){return e.json()}).then(function(t){e({type:S,payload:t})})}}})(I),V=a(6),x={reservedServices:[],calendar:{},servicesList:[],filterConditions:{sortByType:"",sortByName:""},filteredServicesList:[],isReservationFormShown:!1,isModalShown:!1,dataToResForm:"",selectedDateTime:{date:"",time:""}};var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;if(t.type===C)return Object.assign({},e,{selectedDateTime:t.payload});if(t.type===f)return Object.assign({},e,{reservedServices:e.reservedServices.concat(t.payload),selectedDateTime:{date:"",time:""},filteredServicesList:e.servicesList});if(t.type===y)return Object.assign({},e,{reservedServices:e.reservedServices.filter(function(e){return e.id!==t.payload})});if(t.type===E)return Object.assign({},e,{calendar:t.payload});if(t.type===S){var a=e.servicesList.concat(t.payload);return Object.assign({},e,{servicesList:a,filteredServicesList:a})}if(t.type===h){var n=t.payload.sortByName,r=t.payload.sortByType;return Object.assign({},e,{filterConditions:t.payload,filteredServicesList:function(t,a){var n=new RegExp("^".concat(t),"i"),r=new RegExp("^".concat(a),"i");return e.servicesList.filter(function(e){return n.test(e.company.name)}).filter(function(e){return r.test(e.type)})}(n,r)})}return t.type===g?Object(p.a)({},e,{isReservationFormShown:!e.isReservationFormShown,dataToResForm:t.payload||"",filteredServicesList:e.servicesList,selectedDateTime:{date:"",time:""}}):t.type===b?Object(p.a)({},e,{isModalShown:!e.isModalShown}):e},G=a(17),U=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.c,J=Object(V.d)(P,U(Object(V.a)(G.a)));Object(i.render)(r.a.createElement(c.a,{store:J},r.a.createElement(B,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.43c5b1c0.chunk.js.map